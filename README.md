<div align="center">
  
  # üõ°Ô∏è –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —è–∑—ã–∫–µ –°++
  
  ![GitHub code size](https://img.shields.io/github/languages/code-size/BulgakovDmitry/readmeRepo)  
  
  <img src="docs/LFUPicREADME.png" alt="LFU Banner" width="800">
  
</div>

## –î—Ä—É–≥–∏–µ —è–∑—ã–∫–∏

1. [Russian](/README.md)
2. [English](/README-en.md)

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —Å–±–æ—Ä–∫–∞:

–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏, –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏ –∑–∞–ø—É—Å–∫–∞ —Å —Ñ–ª–∞–≥–æ–º ‚Äú--interface‚Äù –≤–≤–µ–¥–∏—Ç–µ:
```cpp
git clone https://github.com/BulgakovDmitry/LFU_cache
cd LFU_cache
make run_with_interface
```
–î–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏ –∑–∞–ø—É—Å–∫–∞ –±–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∑–∞–º–µ–Ω–∏—Ç–µ make run_with_interface –Ω–∞
```cpp
make run
```

–ü—Ä–æ–≥—Ä–∞–º–º–∞ —Ç–∞–∫–∂–µ –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏ –æ—à–∏–±–∫–µ –≤—ã–¥–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π.

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ –≤–≤–µ–¥–∏—Ç–µ:
```cpp
make test
```

–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ü–µ–ª–µ–π makefile —Å –∫—Ä–∞—Ç–∫–∏–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤–≤–µ–¥–∏—Ç–µ:
```cpp
make help
```

## ‚ú® –í–∞–∂–Ω–æ
–í –ø—Ä–æ–≥—Ä–∞–º–º–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –¥–∞–º–ø –ø—Ä–∏ –ø–æ–º–æ—â–∏ graphviz.

–î–ª—è –±—ã—Å—Ç—Ä–æ–π –µ–≥–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ –ª–∏–Ω—É–∫—Å –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ –≤–≤–µ–¥–∏—Ç–µ:
```bash
sudo apt update
sudo apt install graphviz
```

## üí° –ù–µ–º–Ω–æ–≥–æ –æ –¥–∞–º–ø–µ
–ü—Ä–∏ –ø–æ–º–æ—â–∏ graphviz –º—ã –º–æ–∂–µ–º –ø–æ–ª—É—á–∏—Ç—å –ø–æ–Ω—è—Ç–Ω—É—é –∏ —É–¥–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∫–µ—à–∞ –∏ –ø—Ä–æ—Å–ª–µ–¥–∏—Ç—å –∑–∞ –µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º. –ü–æ—Å–º–æ—Ç—Ä–∏–º –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–∞, –∫–∞–∫ –∫–µ—à–∏—Ä—É—é—Ç—Å—è —ç–ª–µ–º–µ–Ω—Ç—ã —Ç–∏–ø–∞ int:

<div align="center">
  <img src="docs/entering.png" alt="Entering Banner" width="400">
</div>

–ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –¥–∞–º–ø –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:

<div align="center">
  <img src="docs/dump.png" alt="Dump Banner" width="1200">
</div>

–¢–∞–∫–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∫–æ–Ω—Å–æ–ª—å–Ω—ã–µ –¥–∞–º–ø—ã, –¥–∞—é—â–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∫–µ—à–∞ –≤ —É–¥–æ–±–Ω–æ–º –¥–ª—è –¥–µ–±–∞–≥–∞ —Ñ–æ—Ä–º–∞—Ç–µ (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –¥–µ–±–∞–≥–∞).
```cpp
template<typename KeyType, typename ValueType>
void        consoleDump           (const LFU<KeyType, ValueType>& cache);

template<typename KeyType, typename ValueType>
void        consoleGeneralizedDump(const LFU<KeyType, ValueType>& cache);

template<typename KeyType, typename ValueType>
void        consoleFullDump       (const std::vector<ValueType>& vec, std::size_t cacheSize);

template<typename KeyType, typename ValueType>
void        graphDump             (const std::vector<ValueType>& vec, std::size_t cacheSize);
```

## üîç –û–±–∑–æ—Ä
–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞ –∫–µ—à–∞:
```cpp
template<typename KeyType, typename ValueType> 
class LFU {
public:
    explicit LFU(std::size_t cacheSize_) noexcept
        : cacheSize(cacheSize_), tick(0), data{}, numberOfHits(0), hashTable{} {}

    ~LFU() = default;

    using ListIt      = typename std::list<CacheCell<KeyType, ValueType>>::iterator;
    using ListConstIt = typename std::list<CacheCell<KeyType, ValueType>>::const_iterator;

    inline void        cacheHit       ()       noexcept {        ++numberOfHits; }
    inline std::size_t nextTick       ()       noexcept { return ++tick;         }
    inline std::size_t getNumberOfHits() const noexcept { return numberOfHits;   }
    inline std::size_t getCacheSize   () const noexcept { return cacheSize;      }
    inline std::size_t dataSize       () const noexcept { return data.size ();   }
    inline bool        empty          () const noexcept { return data.empty();   }

    inline void push_front(const CacheCell<KeyType, ValueType>& value) { data.push_front(value); }

    inline ListIt       begin()       noexcept { return data.begin (); }
    inline ListConstIt  begin() const noexcept { return data.cbegin(); }
    inline ListIt       end  ()       noexcept { return data.end   (); }
    inline ListConstIt  end  () const noexcept { return data.cend  (); }

    inline void splice(ListIt pos, LFU& other, ListIt it) noexcept { data.splice(pos, other.data, it); }

    inline ListIt      find(const KeyType& key) {
        auto hit = hashTable.find(key);
        return (hit == hashTable.end()) ? data.end() : hit->second;
    }

    inline ListConstIt find(const KeyType& key) const {
        auto hit = hashTable.find(key);
        return (hit == hashTable.end()) ? data.end() : hit->second;
    }

    inline void indexKeyIt(const KeyType& key, ListIt it) { hashTable[key] = it;  }
    inline void eraseKey  (const KeyType& key)            { hashTable.erase(key); }
    inline void eraseIt   (ListIt it) {
        if (it == data.end()) return;
        hashTable.erase(it->key);
        data.erase(it);
    }

private:
    std::size_t                              cacheSize;
    Tick_t                                   tick;
    std::list<CacheCell<KeyType, ValueType>> data;
    std::size_t                              numberOfHits;
    std::unordered_map<
        KeyType, 
        ListIt>                              hashTable;
};
```
–¢—É—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è—á–µ–π–∫–∏ –∫–µ—à–∞ –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –≤–∏–¥:
```cpp
template<typename KeyType, typename ValueType> 
struct CacheCell {
    KeyType     key;
    ValueType   value;

    std::size_t numberOfRequests;
    Tick_t      lastAccessedTime;

    bool        emptyFlag;
};
```

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –±–∞–∑–æ–≤—ã–µ –¥–µ—Ç–∞–ª–∏ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è:

| –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è       | –∑–Ω–∞—á–µ–Ω–∏–µ                        |
|-------------------------|-----------------------------------|
| `cacheSize`             | —á–∏—Å–ª–æ –∫–µ—à-—è—á–µ–µ–π –≤ —Ç–µ–∫—É—â–µ–º –∫–µ—à–µ     |
| `tick`             | –≥–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –∫–µ—à–∞, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏–∑—É—é—â–∞—è –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –∞–ª–≥–æ—Ä–∏—Ç–º–∞ (–≤ –µ–¥–∏–Ω–∏—Ü–∞—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ–±—Ä–∞—â–µ–Ω–∏–π)       |
| `data`        | –°–ø–∏—Å–æ–∫ –∫–µ—à-—è—á–µ–µ–∫ —Å –¥–∞–Ω–Ω—ã–º–∏ |
| `key`        | –∫–ª—é—á –∫–µ—à–∏—Ä—É–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è   |
| `value`      | –∫–µ—à–∏—Ä—É–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ      |
| `numberOfRequests`      | –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ —Ç–µ–∫—É—â–µ–π –∫–µ—à-—è—á–µ–π–∫–µ       |
| `lastAccessedTime`      | –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—ã–∑–æ–≤–∞ –≤ –µ–¥–∏–Ω–∏—Ü–∞—Ö, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏–∑—É—é—â–∏—Ö –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –∫–µ—à–∞        |
| `emptyFlag`      | —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ñ–ª–∞–≥, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —Å–≤–æ–±–æ–¥–Ω–∞ –ª–∏ —Ç–µ–∫—É—â–∞—è —è—á–µ–π–∫–∞ –∫—ç—à–∞       |
| `numberOfHits` | –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø–∞–¥–∞–Ω–∏–π –≤ –∫–µ—à |
| `hashTable` | —Ö–µ—à-—Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ –ø–æ –∫–ª—é—á—É |

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
LFU/
‚îú‚îÄ‚îÄ headers/            # Header files
‚îú‚îÄ‚îÄ src/                # Source code
‚îÇ
‚îú‚îÄ‚îÄ tests/              # built-in program testing
‚îÇ   ‚îú‚îÄ‚îÄ src/            # test source code
‚îÇ   ‚îî‚îÄ‚îÄ headers/        # test header files
‚îÇ
‚îú‚îÄ‚îÄ graphDump/          # for images and graphviz files
‚îÇ
‚îú‚îÄ‚îÄ build/              # Project build folder
‚îÇ   ‚îú‚îÄ‚îÄ obj/            # object files
‚îÇ   ‚îî‚îÄ‚îÄ bin/            # executable files
‚îÇ
‚îú‚îÄ‚îÄ myLib/              # my castom library
‚îÇ
‚îî‚îÄ‚îÄ Makefile/           # Makefile           
```
